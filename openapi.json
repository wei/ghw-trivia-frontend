{"openapi":"3.1.0","info":{"title":"Trivia API","description":"REST API for managing trivia question sessions, user answers, and leaderboard rankings","version":"1.0.0"},"paths":{"/health":{"get":{"tags":["Health"],"summary":"Health Check","description":"Health check endpoint.","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/trivia/session/start":{"post":{"tags":["Session Management"],"summary":"Start Session","description":"Start a new trivia session.\n\nRequires admin authentication via X-API-Key header.","operationId":"start_session_api_trivia_session_start_post","parameters":[{"name":"x-api-key","in":"header","required":false,"schema":{"type":"string","title":"X-Api-Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SessionStartRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SessionStartResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/trivia/session/end":{"post":{"tags":["Session Management"],"summary":"End Session","description":"End the current trivia session and reveal the answer.\n\nRequires admin authentication via X-API-Key header.","operationId":"end_session_api_trivia_session_end_post","parameters":[{"name":"x-api-key","in":"header","required":false,"schema":{"type":"string","title":"X-Api-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SessionEndResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/trivia/question":{"get":{"tags":["Questions"],"summary":"Get Question","description":"Retrieve the currently active trivia question.\n\nIf a session is active, the correct answer is not included.\nIf a session has ended, the correct answer is included.\nReturns null question if no session exists.","operationId":"get_question_api_trivia_question_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/QuestionResponse"}}}}}}},"/api/trivia/answer":{"post":{"tags":["Answer Submission"],"summary":"Submit Answer","description":"Submit an answer to the current active question.\n\nReturns immediate feedback with correctness and updated score if correct.","operationId":"submit_answer_api_trivia_answer_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnswerSubmitRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnswerResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/trivia/attempts":{"get":{"tags":["Attempt History"],"summary":"Get All Attempts","description":"Retrieve all answer attempts across all sessions.\n\nAttempts are ordered chronologically (most recent first).\nIncludes username, correctness status, and ISO 8601 timestamp.","operationId":"get_all_attempts_api_trivia_attempts_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AttemptsResponse"}}}}}}},"/api/trivia/leaderboard":{"get":{"tags":["Leaderboard"],"summary":"Get Leaderboard","description":"Retrieve the leaderboard with top scorers.\n\nLeaderboard is ranked by cumulative score (descending).\nFor users with identical scores, ordering is by earliest score acquisition timestamp (ascending).\nSupports pagination via limit and offset query parameters.","operationId":"get_leaderboard_api_trivia_leaderboard_get","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Maximum entries to return","default":10,"title":"Limit"},"description":"Maximum entries to return"},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Number of entries to skip","default":0,"title":"Offset"},"description":"Number of entries to skip"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LeaderboardResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"AnswerResponse":{"properties":{"status":{"type":"string","title":"Status","description":"Status of operation"},"is_correct":{"type":"boolean","title":"Is Correct","description":"Whether the submitted answer is correct"},"message":{"type":"string","title":"Message","description":"Human-readable message"},"score":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Score","description":"Updated score if answer was correct"}},"type":"object","required":["status","is_correct","message"],"title":"AnswerResponse","description":"Response model for answer submission.","example_correct":{"is_correct":true,"message":"Correct!","score":1,"status":"success"},"example_incorrect":{"is_correct":false,"message":"Incorrect!","status":"success"}},"AnswerSubmitRequest":{"properties":{"username":{"type":"string","maxLength":100,"minLength":1,"title":"Username","description":"Username of the participant"},"answer":{"type":"string","maxLength":200,"minLength":1,"title":"Answer","description":"Answer text submission"}},"type":"object","required":["username","answer"],"title":"AnswerSubmitRequest","description":"Request model for submitting an answer.","example":{"answer":"Paris","username":"john_doe"}},"AttemptRecord":{"properties":{"username":{"type":"string","title":"Username","description":"Username who submitted answer"},"is_correct":{"type":"boolean","title":"Is Correct","description":"Whether answer was correct"},"timestamp":{"type":"string","title":"Timestamp","description":"ISO 8601 UTC timestamp of submission"}},"type":"object","required":["username","is_correct","timestamp"],"title":"AttemptRecord","description":"Model for a single attempt record.","example":{"is_correct":true,"timestamp":"2025-11-11T14:30:45Z","username":"john_doe"}},"AttemptsResponse":{"properties":{"status":{"type":"string","title":"Status","description":"Status of operation"},"attempts":{"items":{"$ref":"#/components/schemas/AttemptRecord"},"type":"array","title":"Attempts","description":"List of all answer attempts, ordered chronologically (most recent first)"}},"type":"object","required":["status"],"title":"AttemptsResponse","description":"Response model for retrieving all attempts.","example":{"attempts":[{"is_correct":false,"timestamp":"2025-11-11T14:31:20Z","username":"jane_smith"},{"is_correct":true,"timestamp":"2025-11-11T14:30:45Z","username":"john_doe"}],"status":"success"}},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"LeaderboardEntry":{"properties":{"rank":{"type":"integer","title":"Rank","description":"Rank position (1-indexed)"},"username":{"type":"string","title":"Username","description":"Username of the participant"},"score":{"type":"integer","title":"Score","description":"Cumulative score across all sessions"}},"type":"object","required":["rank","username","score"],"title":"LeaderboardEntry","description":"Model for a single leaderboard entry.","example":{"rank":1,"score":5,"username":"john_doe"}},"LeaderboardResponse":{"properties":{"status":{"type":"string","title":"Status","description":"Status of operation"},"leaderboard":{"items":{"$ref":"#/components/schemas/LeaderboardEntry"},"type":"array","title":"Leaderboard","description":"Ranked list of top scorers, ordered by score descending, with tie-breaking by earliest score acquisition"}},"type":"object","required":["status"],"title":"LeaderboardResponse","description":"Response model for retrieving leaderboard.","example":{"leaderboard":[{"rank":1,"score":5,"username":"john_doe"},{"rank":2,"score":3,"username":"alice_smith"},{"rank":3,"score":0,"username":"bob_jones"}],"status":"success"}},"QuestionResponse":{"properties":{"status":{"type":"string","title":"Status","description":"Status of operation"},"question":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Question","description":"Question text or null if no active session"},"session_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Session Id","description":"Session ID if session exists"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active","description":"Whether session is active"},"correct_answer":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Correct Answer","description":"Correct answer (only shown if session ended)"}},"type":"object","required":["status"],"title":"QuestionResponse","description":"Response model for retrieving the current question.","example_active":{"is_active":true,"question":"What is the capital of France?","session_id":"550e8400-e29b-41d4-a716-446655440000","status":"success"},"example_ended":{"correct_answer":"Paris","is_active":false,"question":"What is the capital of France?","session_id":"550e8400-e29b-41d4-a716-446655440000","status":"success"}},"SessionEndResponse":{"properties":{"status":{"type":"string","title":"Status","description":"Status of operation"},"message":{"type":"string","title":"Message","description":"Human-readable message"},"correct_answer":{"type":"string","title":"Correct Answer","description":"The correct answer revealed"},"successful_attempts":{"items":{},"type":"array","title":"Successful Attempts","description":"List of usernames who answered correctly"}},"type":"object","required":["status","message","correct_answer"],"title":"SessionEndResponse","description":"Response model for ending a trivia session.","example":{"correct_answer":"Paris","message":"Trivia session ended","status":"success","successful_attempts":["john_doe","alice_smith"]}},"SessionStartRequest":{"properties":{"question":{"type":"string","maxLength":500,"minLength":1,"title":"Question","description":"Trivia question text"},"correct_answer":{"type":"string","maxLength":200,"minLength":1,"title":"Correct Answer","description":"Correct answer text"}},"type":"object","required":["question","correct_answer"],"title":"SessionStartRequest","description":"Request model for starting a trivia session.","example":{"correct_answer":"Paris","question":"What is the capital of France?"}},"SessionStartResponse":{"properties":{"status":{"type":"string","title":"Status","description":"Status of operation"},"session_id":{"type":"string","title":"Session Id","description":"Unique identifier for the session"},"message":{"type":"string","title":"Message","description":"Human-readable message"},"question":{"type":"string","title":"Question","description":"Question text"}},"type":"object","required":["status","session_id","message","question"],"title":"SessionStartResponse","description":"Response model for starting a trivia session.","example":{"message":"Trivia session started","question":"What is the capital of France?","session_id":"550e8400-e29b-41d4-a716-446655440000","status":"success"}},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}